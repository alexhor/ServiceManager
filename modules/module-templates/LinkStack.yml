# DO NOT EDIT --- File generated by ServiceManager --- DO NOT EDIT
services:
  linkstack:
    image: linkstackorg/linkstack:latest
    networks:
      - proxy
    restart: unless-stopped
    environment:
      TZ: ${TIMEZONE}
      SERVER_ADMIN: ${ADMIN_EMAIL}
      HTTP_SERVER_NAME: ${DOMAIN}
      HTTPS_SERVER_NAME: ${DOMAIN}
      LOG_LEVEL: info
      PHP_MEMORY_LIMIT: 512M
      UPLOAD_MAX_FILESIZE: 16M
    volumes:
      - data:/htdocs
    labels:
      - traefik.enable=true
      - 'traefik.http.routers.${COMPOSE_PROJECT_NAME}.rule=Host(`${DOMAIN}`)'
      - traefik.http.routers.${COMPOSE_PROJECT_NAME}.tls.certresolver=LetsEncrypt

networks:
  proxy:
    name: ${PROXY_NETWORK_NAME}
    external: true

# Needs this setup to populate the directory with content from the image on first startup
volumes:
  data:
    driver: local
    driver_opts:
      o: bind
      type: none
      device: "${DOMAIN_PATH}/src"